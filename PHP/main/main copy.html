<!DOCTYPE html>
<html lang="ko">
  <body>
    <main>
      <section class="intro_page">
        <div class="intro_page_inner deco">
          <div class="section_title_container">
            <h2 class="title">ë‹¤ì´ì–´ë¦¬ë¥¼<br />ê¾¸ë©°ë³´ê³  ì‹¶ì–´</h2>
            <p class="desc">
              ë³¸ì¸ì´ ì›í•˜ëŠ” ëª¨ìŠµì˜ ë‹¤ì´ì–´ë¦¬ ê¾¸ë¯¸ê¸°ë¥¼<br />ê¾¸ë‹¤ì—ì„œ ì§ì ‘ í•´ë³¼ ìˆ˜
              ìˆì–´ìš”!
            </p>
            <button class="quick_button">ë°”ë¡œê°€ê¸° ></button>
          </div>
          <div class="section_contents_container">
            <img src="../../assets/img/afresh/landing_book.png" alt="ì±… ê·¸ë¦¼" />
            <div class="editor_container">
              <div class="edit_function" alt="í¸ì§‘ê¸°ëŠ¥ ì´ë¯¸ì§€">
                <button id="btn-bold">
                  <b>ê°€</b>
                </button>
                <button id="btn-italic">
                  <i>ê°€</i>
                </button>
                <button id="btn-underline">
                  <u>ê°€</u>
                </button>
                <button id="btn-strike">
                  <s>ê°€</s>
                </button>
                <button id="btn-ordered-list">1.</button>
                <button id="btn-unordered-list">â€¢.</button>
                <button id="btn-image">ì´ë¯¸ì§€</button>
                <input
                  type="file"
                  name="uploadfile"
                  id="img-selector"
                  accept="image/*"
                  style="display: none"
                />
              </div>
              <div class="sticker_cont">
                <p>ì›í•˜ëŠ” ìŠ¤í‹°ì»¤ë¥¼ ë³¸ë¬¸ì— ë“œë˜ê·¸ í•´ë³´ì„¸ìš”!</p>
                <div style="display: flex">
                  <img
                    class="sticker"
                    src="../../assets/img/function_edit_sticker_01.png"
                    alt="ì–‰ê²Œ"
                  />
                  <img
                    class="sticker"
                    src="../../assets/img/function_edit_sticker_02.png"
                    alt="ì–‰ê²Œ"
                  />
                  <img
                    class="sticker"
                    src="../../assets/img/function_edit_sticker_03.png"
                    alt="ì–‰ê²Œ"
                  />
                  <img
                    class="sticker"
                    src="../../assets/img/function_edit_sticker_04.png"
                    alt="ì–‰ê²Œ"
                  />
                  <img
                    class="sticker"
                    src="../../assets/img/function_edit_sticker_05.png"
                    alt="ì–‰ê²Œ"
                  />
                </div>
              </div>
            </div>
            <div
              class="intro_input"
              id="editor"
              contenteditable="true"
              placeholder="ì—¬ê¸°ì— ì…ë ¥í•´ì£¼ì„¸ìš”"
              style="
                background: gray;
                border: 1px solid black;
                width: 400px;
                height: 200px;
              "
            ></div>
          </div>
        </div>
      </section>
    </main>
  </body>

  <script>
    // ìŠ¤í‹°ì»¤ ì„ íƒ
    const stickerAll = document.querySelectorAll(".sticker");
    const size = document.querySelectorAll(".size");

    const stickerContainer = document.querySelector(".sticker_cont > div");

    stickerAll.forEach((item, where) => {
      item.onmousedown = function (event) {
        let shiftX = event.clientX - item.getBoundingClientRect().left;
        let shiftY = event.clientY - item.getBoundingClientRect().top;

        // // í…ŒìŠ¤íŠ¸
        // const test = item.cloneNode(true);
        // document.querySelector(".intro_input").append(test);
        // // ----

        item.style.position = "absolute";
        item.style.border = "1px dashed #721aff";
        item.style.borderRadius = "15px";
        item.style.zIndex = 100;

        document.body.append(item);

        moveAt(event.pageX, event.pageY);

        // ì´ˆê¸° ì´ë™ì„ ê³ ë ¤í•œ ì¢Œí‘œ (pageX, pageY)ì—ì„œ
        // ê³µì„ ì´ë™í•©ë‹ˆë‹¤.
        function moveAt(pageX, pageY) {
          console.log("move at : ", pageX, pageY);

          item.style.left = pageX - shiftX + "px";
          item.style.top = pageY - shiftY + "px";
        }

        function onMouseMove(event) {
          moveAt(event.pageX, event.pageY);
        }

        // mousemoveë¡œ ê³µì„ ì›€ì§ì…ë‹ˆë‹¤.
        document.addEventListener("mousemove", onMouseMove);

        // ê³µì„ ë“œë¡­í•˜ê³ , ë¶ˆí•„ìš”í•œ í•¸ë“¤ëŸ¬ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
        item.onmouseup = function () {
          document.removeEventListener("mousemove", onMouseMove);

          function elementsOverlap(el1, el2) {
            console.log("ê°ì§€ ì‹¤í–‰");
            const domRect1 = el1.getBoundingClientRect();
            const domRect2 = el2.getBoundingClientRect();

            return !(
              domRect1.top > domRect2.bottom ||
              domRect1.right < domRect2.left ||
              domRect1.bottom < domRect2.top ||
              domRect1.left > domRect2.right
            );
          }

          let el1 = item;
          let el2 = document.querySelector(".sticker_cont > div");

          if (elementsOverlap(el1, el2)) {
            item.style.position = "static";
            document.querySelector(".sticker_cont > div").append(item);
          }

          console.log(elementsOverlap(el1, el2)); // ğŸ‘‰ï¸ true

          item.style.border = "5px solid rgba(255, 255, 255, 0)";
          item.onmouseup = null;
        };
      };

      item.ondragstart = function () {
        return false;
      };
    });
  </script>
</html>
